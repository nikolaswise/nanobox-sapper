webpackHotUpdate("_~_4xx~_5xx~callback",{

/***/ "./routes/_components/Login.html":
/*!***************************************!*\
  !*** ./routes/_components/Login.html ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svelte/shared.js */ "./node_modules/svelte/shared.js");
/* routes/_components/Login.html generated by Svelte v1.56.3 */


function data() {
  return {
    state: 'hide'
  }
};

var methods = {
  login() {
    var webAuth = new auth0.WebAuth({
      clientID: 'aSX04KlTPtCsWcKIKSj-F7I8fXeXLGnM',
      domain: 'department.auth0.com',
      redirectUri: 'http://paperclub.local:8080',
      responseType: 'token',
      scope: 'openid profile'
    });

    var email = document.querySelector('.js-email').value
    webAuth.passwordlessStart({
      connection: 'email',
      send: 'link',
      email: email
    }, function(err,res) {
      if (err) {
        alert('error sending email: '+ err.description);
        return;
      }
      alert('Email sent!');
    });
  }
};

function oncreate() {
  let user = JSON.parse(localStorage.user)
  if (user) {
    this.set({user: user})
  }

  var webAuth = new auth0.WebAuth({
    clientID: 'aSX04KlTPtCsWcKIKSj-F7I8fXeXLGnM',
    domain: 'department.auth0.com',
    redirectUri: 'http://paperclub.local:8080',
    responseType: 'token',
    scope: 'openid profile'
  });

  if(window.location.hash){
    webAuth.parseHash(window.location.hash, function(err, authResult) {
      if (err) {
        return console.log(err);
      } else if (authResult){
        localStorage.setItem('accessToken', authResult.accessToken);
        console.log(authResult.accessToken)

        webAuth.client.userInfo(authResult.accessToken, function(err, user) {
          if (err){
            console.log('err',err);
            alert('There was an error retrieving your profile: ' + err.message);
          } else {
            console.log(user)
            localStorage.setItem('user', JSON.stringify(user));
          }
        });
      }
    });
  }
};

function create_main_fragment(component, state) {
	var text, div, p, text_1, text_2, input, text_3, button, text_4;

	function select_block_type(state) {
		if (state.user) return create_if_block;
		return create_if_block_1;
	}
	var current_block_type = select_block_type(state);
	var if_block = current_block_type(component, state);

	function click_handler(event) {
		component.login();
	}

	return {
		c: function create() {
			if_block.c();
			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("\n\n");
			div = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("div");
			p = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("p");
			text_1 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("Magic Link Sign In:");
			text_2 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("\n  ");
			input = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("input");
			text_3 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("\n  ");
			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("button");
			text_4 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("Send Email");
			this.h();
		},

		l: function claim(nodes) {
			if_block.l(nodes);
			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(nodes, "\n\n");

			div = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(nodes, "DIV", { class: true }, false);
			var div_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(div);

			p = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(div_nodes, "P", {}, false);
			var p_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(p);

			text_1 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(p_nodes, "Magic Link Sign In:");
			p_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			text_2 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(div_nodes, "\n  ");

			input = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(div_nodes, "INPUT", { class: true, type: true, placeholder: true }, false);
			var input_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(input);

			input_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			text_3 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(div_nodes, "\n  ");

			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(div_nodes, "BUTTON", {}, false);
			var button_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(button);

			text_4 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(button_nodes, "Send Email");
			button_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			div_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			this.h();
		},

		h: function hydrate() {
			input.className = "js-email";
			input.type = "email";
			input.placeholder = "email";
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["addListener"])(button, "click", click_handler);
			div.className = state.state;
		},

		m: function mount(target, anchor) {
			if_block.m(target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(text, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(div, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(p, div);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text_1, p);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text_2, div);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(input, div);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text_3, div);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(button, div);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text_4, button);
		},

		p: function update(changed, state) {
			if (current_block_type === (current_block_type = select_block_type(state)) && if_block) {
				if_block.p(changed, state);
			} else {
				if_block.u();
				if_block.d();
				if_block = current_block_type(component, state);
				if_block.c();
				if_block.m(text.parentNode, text);
			}

			if (changed.state) {
				div.className = state.state;
			}
		},

		u: function unmount() {
			if_block.u();
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(text);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(div);
		},

		d: function destroy() {
			if_block.d();
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["removeListener"])(button, "click", click_handler);
		}
	};
}

// (1:0) {{#if user}}
function create_if_block(component, state) {
	var p, text_value = state.user.nickname, text, text_1, button, text_2;

	function click_handler(event) {
		var state = component.get();
		component.set({ state: state.show});
	}

	return {
		c: function create() {
			p = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("p");
			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])(text_value);
			text_1 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("\n  ");
			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("button");
			text_2 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("login");
			this.h();
		},

		l: function claim(nodes) {
			p = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(nodes, "P", {}, false);
			var p_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(p);

			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(p_nodes, text_value);
			p_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			text_1 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(nodes, "\n  ");

			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(nodes, "BUTTON", {}, false);
			var button_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(button);

			text_2 = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(button_nodes, "login");
			button_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			this.h();
		},

		h: function hydrate() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["addListener"])(button, "click", click_handler);
		},

		m: function mount(target, anchor) {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(p, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text, p);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(text_1, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(button, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text_2, button);
		},

		p: function update(changed, state) {
			if ((changed.user) && text_value !== (text_value = state.user.nickname)) {
				text.data = text_value;
			}
		},

		u: function unmount() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(p);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(text_1);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(button);
		},

		d: function destroy() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["removeListener"])(button, "click", click_handler);
		}
	};
}

// (4:0) {{else}}
function create_if_block_1(component, state) {
	var button, text;

	function click_handler(event) {
		var state = component.get();
		component.set({ state: state.show});
	}

	return {
		c: function create() {
			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createElement"])("button");
			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["createText"])("login");
			this.h();
		},

		l: function claim(nodes) {
			button = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimElement"])(nodes, "BUTTON", {}, false);
			var button_nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(button);

			text = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["claimText"])(button_nodes, "login");
			button_nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
			this.h();
		},

		h: function hydrate() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["addListener"])(button, "click", click_handler);
		},

		m: function mount(target, anchor) {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["insertNode"])(button, target, anchor);
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["appendNode"])(text, button);
		},

		p: svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["noop"],

		u: function unmount() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"])(button);
		},

		d: function destroy() {
			Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["removeListener"])(button, "click", click_handler);
		}
	};
}

function Login(options) {
	Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["init"])(this, options);
	this._state = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["assign"])(data(), options.data);

	var _oncreate = oncreate.bind(this);

	if (!options.root) {
		this._oncreate = [];
	}

	this._fragment = create_main_fragment(this, this._state);

	this.root._oncreate.push(_oncreate);

	if (options.target) {
		var nodes = Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["children"])(options.target);
		options.hydrate ? this._fragment.l(nodes) : this._fragment.c();
		nodes.forEach(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["detachNode"]);
		this._mount(options.target, options.anchor);

		Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["callAll"])(this._oncreate);
	}
}

Object(svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["assign"])(Login.prototype, methods, svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__["proto"]);


let proxyComponent = Login;

if (true) {

	const { configure, register, reload } = __webpack_require__(/*! svelte-loader/lib/hot-api */ "./node_modules/svelte-loader/lib/hot-api.js");

	module.hot.accept();

	if (!module.hot.data) {
		// initial load
		configure({});
		proxyComponent = register("routes/_components/Login.html", Login);
	} else {
		// hot update
		reload("routes/_components/Login.html", proxyComponent);
	}
}

/* harmony default export */ __webpack_exports__["default"] = (proxyComponent);


/***/ })

})
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yb3V0ZXMvX2NvbXBvbmVudHMvTG9naW4uaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7YUFtRFMsR0FBRztBQUNSLEVBQUUsT0FBTztBQUNULElBQUksS0FBSyxFQUFFLE1BQU07QUFDakIsR0FBRztBQUNILENBQUM7O2NBRVE7QUFDVCxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksSUFBSSxPQUFPLEdBQUcsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ3BDLE1BQU0sUUFBUSxFQUFFLGtDQUFrQztBQUNsRCxNQUFNLE1BQU0sRUFBRSxzQkFBc0I7QUFDcEMsTUFBTSxXQUFXLEVBQUUsNkJBQTZCO0FBQ2hELE1BQU0sWUFBWSxFQUFFLE9BQU87QUFDM0IsTUFBTSxLQUFLLEVBQUUsZ0JBQWdCO0FBQzdCLEtBQUssQ0FBQyxDQUFDOztBQUVQLElBQUksSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLO0FBQ3pELElBQUksT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQzlCLE1BQU0sVUFBVSxFQUFFLE9BQU87QUFDekIsTUFBTSxJQUFJLEVBQUUsTUFBTTtBQUNsQixNQUFNLEtBQUssRUFBRSxLQUFLO0FBQ2xCLEtBQUssRUFBRSxTQUFTLEdBQUcsQ0FBQyxHQUFHLEVBQUU7QUFDekIsTUFBTSxJQUFJLEdBQUcsRUFBRTtBQUNmLFFBQVEsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN4RCxRQUFRLE9BQU87QUFDZixPQUFPO0FBQ1AsTUFBTSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDM0IsS0FBSyxDQUFDLENBQUM7QUFDUCxHQUFHO0FBQ0gsQ0FBQzs7aUJBakVRLEdBQUc7QUFDWixFQUFFLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQztBQUMxQyxFQUFFLElBQUksSUFBSSxFQUFFO0FBQ1osSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFCLEdBQUc7O0FBRUgsRUFBRSxJQUFJLE9BQU8sR0FBRyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDbEMsSUFBSSxRQUFRLEVBQUUsa0NBQWtDO0FBQ2hELElBQUksTUFBTSxFQUFFLHNCQUFzQjtBQUNsQyxJQUFJLFdBQVcsRUFBRSw2QkFBNkI7QUFDOUMsSUFBSSxZQUFZLEVBQUUsT0FBTztBQUN6QixJQUFJLEtBQUssRUFBRSxnQkFBZ0I7QUFDM0IsR0FBRyxDQUFDLENBQUM7O0FBRUwsRUFBRSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQzFCLElBQUksT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxTQUFTLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDdEUsTUFBTSxJQUFJLEdBQUcsRUFBRTtBQUNmLFFBQVEsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE9BQU8sTUFBTSxJQUFJLFVBQVUsQ0FBQztBQUM1QixRQUFRLFlBQVksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwRSxRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQzs7QUFFM0MsUUFBUSxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLFNBQVMsR0FBRyxFQUFFLElBQUksRUFBRTtBQUM1RSxVQUFVLElBQUksR0FBRyxDQUFDO0FBQ2xCLFlBQVksT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkMsWUFBWSxLQUFLLENBQUMsOENBQThDLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hGLFdBQVcsTUFBTTtBQUNqQixZQUFZLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQzdCLFlBQVksWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFdBQVc7QUFDWCxTQUFTLENBQUMsQ0FBQztBQUNYLE9BQU87QUFDUCxLQUFLLENBQUMsQ0FBQztBQUNQLEdBQUc7QUFDSCxDQUFDOzs7Ozs7WUFqREMsSUFBSTs7Ozs7OztZQVVVLEtBQUssRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt5QkFIYixLQUFLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQUFMLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkJBTlosSUFBSSxDQUFDLFFBQVE7Ozs7WUFDQSxHQUFHLENBQUMsRUFBRSxLQUFLLFFBQUUsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0REFEaEMsSUFBSSxDQUFDLFFBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBR0EsR0FBRyxDQUFDLEVBQUUsS0FBSyxRQUFFLElBQUksQ0FBQyxDQUFDIiwiZmlsZSI6Il9+XzR4eH5fNXh4fmNhbGxiYWNrLjIyOTE4NTNmZjVhYTMxYzAzY2FlLmhvdC11cGRhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ7eyNpZiB1c2VyfX1cbiAgPHA+e3t1c2VyLm5pY2tuYW1lfX08L3A+XG4gIDxidXR0b24gb246Y2xpY2s9XCJzZXQoeyBzdGF0ZTogc2hvd30pXCI+bG9naW48L2J1dHRvbj5cbnt7ZWxzZX19XG4gIDxidXR0b24gb246Y2xpY2s9XCJzZXQoeyBzdGF0ZTogc2hvd30pXCI+bG9naW48L2J1dHRvbj5cbnt7L2lmfX1cblxuPGRpdiBjbGFzcz1cInt7c3RhdGV9fVwiPlxuICA8cD5NYWdpYyBMaW5rIFNpZ24gSW46PC9wPlxuICA8aW5wdXQgY2xhc3M9XCJqcy1lbWFpbFwiIHR5cGU9XCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwiZW1haWxcIj5cbiAgPGJ1dHRvbiBvbjpjbGljaz1cImxvZ2luKClcIj5TZW5kIEVtYWlsPC9idXR0b24+XG48L2Rpdj5cblxuPHNjcmlwdD5cbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIG9uY3JlYXRlICgpIHtcbiAgICAgIGxldCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UudXNlcilcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRoaXMuc2V0KHt1c2VyOiB1c2VyfSlcbiAgICAgIH1cblxuICAgICAgdmFyIHdlYkF1dGggPSBuZXcgYXV0aDAuV2ViQXV0aCh7XG4gICAgICAgIGNsaWVudElEOiAnYVNYMDRLbFRQdENzV2NLSUtTai1GN0k4ZlhlWExHbk0nLFxuICAgICAgICBkb21haW46ICdkZXBhcnRtZW50LmF1dGgwLmNvbScsXG4gICAgICAgIHJlZGlyZWN0VXJpOiAnaHR0cDovL3BhcGVyY2x1Yi5sb2NhbDo4MDgwJyxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAndG9rZW4nLFxuICAgICAgICBzY29wZTogJ29wZW5pZCBwcm9maWxlJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoKXtcbiAgICAgICAgd2ViQXV0aC5wYXJzZUhhc2god2luZG93LmxvY2F0aW9uLmhhc2gsIGZ1bmN0aW9uKGVyciwgYXV0aFJlc3VsdCkge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYXV0aFJlc3VsdCl7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhdXRoUmVzdWx0LmFjY2Vzc1Rva2VuKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGF1dGhSZXN1bHQuYWNjZXNzVG9rZW4pXG5cbiAgICAgICAgICAgIHdlYkF1dGguY2xpZW50LnVzZXJJbmZvKGF1dGhSZXN1bHQuYWNjZXNzVG9rZW4sIGZ1bmN0aW9uKGVyciwgdXNlcikge1xuICAgICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJyxlcnIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmV0cmlldmluZyB5b3VyIHByb2ZpbGU6ICcgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcilcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGF0YSAoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0ZTogJ2hpZGUnXG4gICAgICB9XG4gICAgfSxcblxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGxvZ2luKCkge1xuICAgICAgICB2YXIgd2ViQXV0aCA9IG5ldyBhdXRoMC5XZWJBdXRoKHtcbiAgICAgICAgICBjbGllbnRJRDogJ2FTWDA0S2xUUHRDc1djS0lLU2otRjdJOGZYZVhMR25NJyxcbiAgICAgICAgICBkb21haW46ICdkZXBhcnRtZW50LmF1dGgwLmNvbScsXG4gICAgICAgICAgcmVkaXJlY3RVcmk6ICdodHRwOi8vcGFwZXJjbHViLmxvY2FsOjgwODAnLFxuICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3Rva2VuJyxcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBwcm9maWxlJ1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZW1haWwnKS52YWx1ZVxuICAgICAgICB3ZWJBdXRoLnBhc3N3b3JkbGVzc1N0YXJ0KHtcbiAgICAgICAgICBjb25uZWN0aW9uOiAnZW1haWwnLFxuICAgICAgICAgIHNlbmQ6ICdsaW5rJyxcbiAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyLHJlcykge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdlcnJvciBzZW5kaW5nIGVtYWlsOiAnKyBlcnIuZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhbGVydCgnRW1haWwgc2VudCEnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuPC9zY3JpcHQ+Il0sInNvdXJjZVJvb3QiOiIifQ==